<!-- This renders markdown image notation into pics or vids with captions -->
{{ $dest := .Destination | safeURL }}
<!-- /static/ prefix is used in markdown docs so images preview correctly, but we don't want them in the rendered/deployed url -->
{{ $cleanDest := replace $dest "/static/" "/" }}

<div class="row captioned-img">
    {{ if or (hasSuffix $cleanDest ".mp4") (hasSuffix $cleanDest ".webm") }}
    <video class="img-responsive img-span-row img-content" autoplay loop muted controls>
        <source src="{{ $cleanDest }}" type="video/mp4" />
    </video>
    {{ else }}
    <a href={{ $cleanDest }}><img class="img-responsive img-content" src={{ $cleanDest }} /></a>
    {{ end }}
    <p class="caption">{{ .Text | safeHTML }}{{ with .Title }} (Source: {{ . | safeHTML }}){{ end }}</p>
</div>
