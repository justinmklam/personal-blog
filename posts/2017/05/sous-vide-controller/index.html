<!doctype html><html lang=en><head><title>ESP8266 Sous Vide Controller</title>
<meta property="og:image" content="https://justinmklam.com//posts/2017/05/sous-vide-controller/IMG_8522_hu_cc6eee804bef696a.jpg"><meta property="og:type" content="blog"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Immersing food in a temperature controlled water bath."><meta name=author content="Justin Lam"><link rel=stylesheet href=https://justinmklam.com/css/syntax.min.css media=screen><link rel=stylesheet href=https://justinmklam.com/css/syntax-dark.min.css media="screen and (prefers-color-scheme: dark)"><link rel=stylesheet href=https://justinmklam.com/css/styles.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-85178257-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-85178257-1")</script></head><body><div class="navbar row"><div><span class=navbar-brand>Justin Lam</span></div><div class=navbar-links><a href=/>Blog</a>
<a href=/archives/>Archives</a>
<a href=/about/>About</a>
<a href=/contact/>Contact</a></div></div><div><div class=single-content><h2 data-toc-skip class=blog-title>ESP8266 Sous Vide Controller</h2><p class=blog-title-metadata>Posted on February 5, 2017
&nbsp;&#183;&nbsp;6 min read
&nbsp;&#183;&nbsp;
<span class=disqus-comment-count data-disqus-url=https://justinmklam.com/posts/2017/05/sous-vide-controller/#disqus_thread>0 comments</span>
&nbsp;&#183;&nbsp;
<a class=blog-tag href=/tags/electrical>#electrical&nbsp;</a>
<a class=blog-tag href=/tags/programming>#programming&nbsp;</a>
<a class=blog-tag href=/tags/embedded>#embedded&nbsp;</a></p><a href=/posts/2017/05/sous-vide-controller/IMG_8522_hu_cc6eee804bef696a.jpg><img class="img-content img-content-header" src=/posts/2017/05/sous-vide-controller/IMG_8522_hu_cc6eee804bef696a.jpg></a><details class=toc><summary>&nbsp;Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#project-summary>Project Summary</a></li><li><a href=#the-long-version>The Long Version</a><ul><li><a href=#the-sous-vide-story>The Sous Vide Story</a></li><li><a href=#the-controller>The Controller</a></li><li><a href=#the-data>The Data</a><ul><li><a href=#a-comparison-of-cookers>A Comparison of Cookers</a></li></ul></li><li><a href=#the-verdict>The Verdict</a></li></ul></li></ul></nav></summary></details><div class="blog-content page-content"><h1 id=project-summary>Project Summary</h1><p><strong>Objective:</strong> Create a small, modular controller to regulate the temperature of a water bath.</p><p><strong>Motivation:</strong> To get in on this cooking fad without dropping fat stacks of cash on an immersion circulator.</p><p><strong>Features:</strong></p><ul><li>Crisp 0.96" OLED display</li><li>Pushbutton rotary encoder provides simple user interaction</li><li>Removable temperature plug through standard 3-pos audio connector</li><li>Temperature controlled outlet to be used with any heating element (ie. rice cooker, slow cooker, etc.)</li><li>Always on outlet for water circulator</li><li>Temperature logging over wifi</li></ul><p><strong>Source:</strong> <a href=https://github.com/justinmklam/sous-vide>Github</a></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8508_hu_c1ad61bc317722ca.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8508_hu_c1ad61bc317722ca.jpg></a><p class=caption>Modular sous vide controller powered by everyone&rsquo;s favourite WiFi chip, the EPS8266.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/ui-demo.gif><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/ui-demo.gif></a><p class=caption>Push button toggles between three states: main monitoring screen, set cooking time, and set cooking temperature.</p></div></p><h1 id=the-long-version>The Long Version</h1><h2 id=the-sous-vide-story>The Sous Vide Story</h2><p>You may have heard people rant about this fancy new cooking method that&rsquo;s all the rage right now, but of course you shrug it off as a fad. But here you are, intrigued enough to be reading this article about the very thing you previously rolled your eyes at. So what the heck is sous vide anyway? The peeps over at <a href=https://www.chefsteps.com/activities/what-is-sous-vide>ChefSteps</a> have an answer:</p><blockquote><p>Imagine you’re cooking a steak. You probably know exactly the color and texture—the doneness, in other words—you’d like, right? With sous vide (say “sue veed”), you simply set a pot of water to the corresponding time and temperature, and you can get that perfect doneness you desire, every time.</p></blockquote><p>Simply put, you stick the steak in a ziploc bag, stick the bag in the temperature controlled water bath, and wait for the steak to reach thermal equilibrium. After an hour or so, the steak will be the same temperature of the water bath. Need to wait an extra hour before you cook? Not to worry, your steak will be safe since it&rsquo;ll never exceed the temperature of the bath. With sous vide, say goodbye to overcooked food; physics just won&rsquo;t let it happen.</p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/sousvideTechniques.png><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/sousvideTechniques.png></a><p class=caption>Talk nerdy to me about sous vide. (Source: ChefSteps)</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/what-is-sous-vide_hu_20d9d34a3a5268f2.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/what-is-sous-vide_hu_20d9d34a3a5268f2.jpg></a><p class=caption>Once immersion circulators came to the consumer market, sous vide became accessible to home kitchens. (Source: Anova Culinary)</p></div></p><h2 id=the-controller>The Controller</h2><p>Wanting to get in on this craze without spending a fortune (especially if it turned out to be a novelty), I set off to make my own. If all a sous vide device does is temperature control of a heating element, then it wouldn&rsquo;t be anything my recent mechatronics degree couldn&rsquo;t handle.</p><p><strong>Equipment:</strong></p><ul><li>Rice cooker to act as the heating element and water vessel</li><li><a href="https://www.amazon.ca/gp/product/B00EWENKXO/ref=oh_aui_detailpage_o05_s00?ie=UTF8&amp;psc=1">80 GPH Acquarium pump</a> to circulate the water</li><li><a href="https://www.amazon.ca/gp/product/B00KLZQ0P8/ref=oh_aui_detailpage_o09_s00?ie=UTF8&amp;psc=1">DS18B20</a> waterproof temperature sensor</li><li>ESP8266 WiFi Chip</li></ul><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8608_hu_ee1f65f8d0e4db49.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8608_hu_ee1f65f8d0e4db49.jpg></a><p class=caption>DIY sous vide setup with home-made temperature controller.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8522_hu_cc6eee804bef696a.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8522_hu_cc6eee804bef696a.jpg></a><p class=caption>Front face of the controller.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8526_hu_e1135fe694d02529.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8526_hu_e1135fe694d02529.jpg></a><p class=caption>Backside of the controller. Note the switch and cord grip for that back-me-on-Kickstarter finish quality.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8454_hu_7243b436b7e6b716.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8454_hu_7243b436b7e6b716.jpg></a><p class=caption>Little space was left unused to minimize the physical footprint of the circuit.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8432_hu_4bb9cd9b6e4117ef.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8432_hu_4bb9cd9b6e4117ef.jpg></a><p class=caption>Reveal of perfboard craftsmanship using the gobs-of-solder trace method.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/iUJLGdd_hu_191f56bf3f8ed139.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/iUJLGdd_hu_191f56bf3f8ed139.jpg></a><p class=caption>I designed the panel in SolidWorks, printed out the layout, taped it to a store bought enclosure panel and used a Dremel to carve out the holes.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/DCfOE0B_hu_c0fbd2359580eab7.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/DCfOE0B_hu_c0fbd2359580eab7.jpg></a><p class=caption>Dry fitting after a bit of filing to clean up the edges and corners.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8400_hu_1dd82d06ac4bd3d9.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8400_hu_1dd82d06ac4bd3d9.jpg></a><p class=caption>Programming the ESP8266.</p></div></p><h2 id=the-data>The Data</h2><p>No project is complete without analyzing data! The main unknowns thus far:</p><ol><li>Rise time and stability comparison between various cooking vessels</li><li>Temperature stability improvements with a water circulator</li><li>Is a bang-bang controller sufficient or is PID required?</li></ol><p>To assess these questions, I setup the ESP8266 to push live temperature data to an online web server. Through <a href=http://mqtt.org/>MQTT</a>, I was able to send live temperature data from the controller to <a href=https://io.adafruit.com/>Adafruit.IO</a>. This service (in open beta at the time of writing) allows dashboards and data feeds to be easily created for real-time monitoring of anything.</p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/adafruit-dashboard.png><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/adafruit-dashboard.png></a><p class=caption>The ESP8266 logs temperature data through Adafruit servers. Data is displayed through their live dashboard feed.</p></div></p><h3 id=a-comparison-of-cookers>A Comparison of Cookers</h3><p>Four trials were conducted with three different cooking vessels: a 3 cup rice cooker, 7 cup rice cooker, and a 14 cup (3.3 L) slow cooker. Two cups of water were used in each vessel for these tests. As shown through the graph below, the rice cookers get up to 55°C significantly than the <em>(very)</em> slow cooker. Although it would be better in maintaining temperature due to its ceramic makeup, it took way too long to heat up for practical purposes. You can fill it with hot/boiling water to help it warm up, but it still wouldn&rsquo;t be as fast or convenient than the rice cookers.</p><p>Slow cooker, you are the weakest link. Goodbye.</p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/plot_benchmarks2.png><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/plot_benchmarks2.png></a><p class=caption>Comparison of rice and slow cookers with circulated and uncirculated water baths.</p></div></p><p>Looking at the rice cookers in more detail, we see that the small rice cooker has a much lower overshoot than the large. This makes sense since the heating element is smaller, thus it retains less heat &ldquo;momentum&rdquo; upon shutoff. The addition of a water circulator significantly reduced the steady state temperature oscillation as well as the amplitude of overshoot. With the added benefit of greater temperature uniformity within the water bath than relying on natural convection to mix the water, using a circulator is proven to be a necessity.</p><p>Moving forward, I decided to use the large rice cooker with a circulator. Although the small rice cooker reaches steady state more quickly, its small vessel size s unfortunately not practical for cooking anything but a feast for ants.</p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/plot_benchmarks.png><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/plot_benchmarks.png></a><p class=caption>Comparison of the remaining cooking vessels.</p></div></p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG_8543_hu_e123f0ff7bd5bf56.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG_8543_hu_e123f0ff7bd5bf56.jpg></a><p class=caption>Small aquarium pump used to circulate the water.</p></div></p><p>Time to actually cook with this thing! After trying out various foods, the data shows that the temperature stability is surprisingly stable given the simple on-off temperature control.</p><p>![Log of cook times.](plot_cook times.png)</p><p>Quantifying the ripple with some simple analysis shows that the average standard deviation for these four cooking trials was ±0.4°C, where the steak had the highest deviation of ±0.6°C.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-no-highlight data-lang=no-highlight><span class=line><span class=cl>    Trout Fillet at 48C for 59 mins
</span></span><span class=line><span class=cl>       Mean:  48.35°C (+1.15, -0.73)
</span></span><span class=line><span class=cl>       Std:  ±0.34°C
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Sirloin Steak at 53C for 84 mins
</span></span><span class=line><span class=cl>       Mean:  53.03°C (+1.78, -2.65)
</span></span><span class=line><span class=cl>       Std:  ±0.63°C
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Chicken Thighs at 70C for 99 mins
</span></span><span class=line><span class=cl>       Mean:  70.03°C (+0.59, -1.53)
</span></span><span class=line><span class=cl>       Std:  ±0.30°C
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Burger Patty at 60C for 31 mins
</span></span><span class=line><span class=cl>       Mean:  60.16°C (+0.72, -0.66)
</span></span><span class=line><span class=cl>       Std:  ±0.23°C
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    --&gt; AVERAGE STANDARD DEV: ±0.38°C
</span></span></code></pre></div><p>Thus, using a simple temperature control implementation with a water circulator yields quite satisfying results.</p><h2 id=the-verdict>The Verdict</h2><p>They say a picture is worth a thousand words. The one below might not be worth quite that many, but that pink uniformity definitely speaks for itself.</p><p><div class="row img-captioned"><a href=/posts/2017/05/sous-vide-controller/IMG-20161231-WA0007_hu_637af422a296c57a.jpg><img loading=lazy class="img-responsive img-content" src=/posts/2017/05/sous-vide-controller/IMG-20161231-WA0007_hu_637af422a296c57a.jpg></a><p class=caption>A uniformly cooked sirloin steak finished on a cast-iron pan.</p></div></p></div><div class=nav-btn><a href=/>&lt; Recent Posts</a></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="justinmklam",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><div style=text-align:center><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>Comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>Comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script defer id=dsq-count-scr src=//justinmklam.disqus.com/count.js async></script></body><footer><div class=footer-container><hr><p>&copy; 2025 Justin Lam | <a href=/colophon>Colophon</a></p></div></footer></html>