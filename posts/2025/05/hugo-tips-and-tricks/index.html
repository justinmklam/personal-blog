<!doctype html><html lang=en><head><title>Hugo: Some Random Tips and Tricks</title>
<meta property="og:image" content="https://justinmklam.com//posts/2025/05/hugo-tips-and-tricks/cover.png"><meta property="og:type" content="blog"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Justin Lam"><link rel=stylesheet href=https://justinmklam.com/css/syntax.min.css media=screen><link rel=stylesheet href=https://justinmklam.com/css/syntax-dark.min.css media="screen and (prefers-color-scheme: dark)"><link rel=stylesheet href=https://justinmklam.com/css/styles.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-85178257-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-85178257-1")</script></head><body><div class="navbar row"><div><span class=navbar-brand>Justin Lam</span></div><div class=navbar-links><a href=/>Blog</a>
<a href=/projects/>Projects</a>
<a href=/about/>About</a>
<a href=/contact/>Contact</a></div></div><div><div class=single-content><h2 data-toc-skip class=blog-title>Hugo: Some Random Tips and Tricks</h2><p class=blog-title-metadata>Posted on May 23, 2025
&nbsp;&#183;&nbsp;9 min read
&nbsp;&#183;&nbsp;
<span class=disqus-comment-count data-disqus-url=https://justinmklam.com/posts/2025/05/hugo-tips-and-tricks/#disqus_thread>0 comments</span>
&nbsp;&#183;&nbsp;
<a class=blog-tag href=/tags/programming>#programming&nbsp;</a></p><a href=/posts/2025/05/hugo-tips-and-tricks/cover.png><img class="img-content img-content-header" src=/posts/2025/05/hugo-tips-and-tricks/cover.png></a><details class=toc><summary>&nbsp;Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#markdown-render-hooks>Markdown Render Hooks</a><ul><li><a href=#headings>Headings</a></li><li><a href=#images>Images</a></li></ul></li><li><a href=#pipes>Pipes</a><ul><li><a href=#compiling-and-minifying-css>Compiling and Minifying CSS</a></li><li><a href=#processing-images>Processing Images</a></li></ul></li><li><a href=#adaptive-syntax-highlighting>Adaptive Syntax Highlighting</a></li><li><a href=#building-and-deploying>Building and Deploying</a></li><li><a href=#bonus-using-obsidian-as-a-local-cms>Bonus: Using Obsidian as a Local CMS</a><ul><li><a href=#settings>Settings</a></li><li><a href=#plugins>Plugins</a></li><li><a href=#front-matter>Front Matter</a></li></ul></li></ul></nav></summary></details><div class="blog-content page-content"><p>My intro to Hugo was back in 2016, a mere 3 years after its <a href=https://en.wikipedia.org/wiki/Hugo_(software)>inception</a>, when I was in my early days of learning web development. Quite a bit has changed since then, both in what Hugo is capable of and my understanding of how to actually code. I&rsquo;m far from being a frontend dev, but I&rsquo;ve gathered a collection of snippets that I&rsquo;ve stumbled along the way in bringing this website up to more modern standards.</p><h1 id=markdown-render-hooks class=anchor><a href=#markdown-render-hooks>Markdown Render Hooks</a></h1><p>Render hooks can be used to override markdown to HTML conversions to give full flexibility in how components are presented while staying being able to write markdown. As useful as <a href=https://gohugo.io/content-management/shortcodes/>shortcodes</a> are, they typically aren&rsquo;t compatible with normal markdown editors/viewers, which adds a bit of friction when you need to have two windows open (one for editing, and the other for previewing).</p><p>Full docs are <a href=https://gohugo.io/render-hooks/introduction/>here</a>, but the ones below are the ones I found most useful.</p><h2 id=headings class=anchor><a href=#headings>Headings</a></h2><p>Many websites these days have heading anchors that readers can click on, making it easy to reference or share direct sections of a page. Fortunately, a simple template can be used to achieve this.</p><p>Create the following file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>layouts/_default/_markup/render-heading.html
</span></span></code></pre></div><p>With content that looks something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>h</span><span class=err>{{</span> <span class=err>.</span><span class=na>Level</span> <span class=err>}}</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;{{ .Anchor | safeURL }}&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;anchor&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;#{{ .Anchor | safeURL }}&#34;</span><span class=p>&gt;</span>{{ .Text | safeHTML }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=err>&lt;</span>/h{{ .Level }}&gt;
</span></span></code></pre></div><p>And voila, all your headings in your rendered posts are now anchored!</p><h2 id=images class=anchor><a href=#images>Images</a></h2><p>I wanted to customise how images and captions were displayed, as well as being able to use markdown syntax for both images and videos. This template does that, which conditionally renders the two media types differently.</p><p>I also wanted to show a build warning when an image can&rsquo;t be found (e.g. image was moved or renamed without updating the link), so <code>warnf</code> does that.</p><p>In this file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>layouts/_default/_markup/render-image.html
</span></span></code></pre></div><p>Contents look like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- This renders markdown image notation into pics or vids with captions --&gt;</span>
</span></span><span class=line><span class=cl>{{ $dest := .Destination | safeURL }}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;row img-captioned&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- Video --&gt;</span>
</span></span><span class=line><span class=cl>    {{ if or (hasSuffix $dest &#34;.mp4&#34;) (hasSuffix $dest &#34;.webm&#34;) }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>video</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;img-content&#34;</span> <span class=na>autoplay</span> <span class=na>loop</span> <span class=na>muted</span> <span class=na>controls</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>source</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ $dest }}&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;video/mp4&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>video</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{ else }}
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- Image --&gt;</span>
</span></span><span class=line><span class=cl>        {{ $image := .PageInner.Resources.Get $dest }}
</span></span><span class=line><span class=cl>        {{ if $image }}
</span></span><span class=line><span class=cl>            {{ $image = partial &#34;resize-image.html&#34; (dict &#34;image&#34; $image) }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>{{</span> <span class=err>$</span><span class=na>image</span><span class=err>.</span><span class=na>RelPermalink</span> <span class=err>}}</span><span class=p>&gt;&lt;</span><span class=nt>img</span> <span class=na>loading</span><span class=o>=</span><span class=s>&#34;lazy&#34;</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;img-content&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>{{</span> <span class=err>$</span><span class=na>image</span><span class=err>.</span><span class=na>RelPermalink</span> <span class=err>}}</span><span class=p>&gt;&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        {{ else }}
</span></span><span class=line><span class=cl>            {{ warnf &#34;Image not found for %s: %s&#34; $.PageInner.RelPermalink $dest }}
</span></span><span class=line><span class=cl>        {{ end }}
</span></span><span class=line><span class=cl>    {{ end }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>p</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;caption&#34;</span><span class=p>&gt;</span>{{ .Text | safeHTML }}{{ with .Title }} (Source: {{ . | safeHTML }}){{ end }}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Note: There&rsquo;s a <code>resize-image.html</code> partial that&rsquo;s referenced, more on that next!</p><h1 id=pipes class=anchor><a href=#pipes>Pipes</a></h1><h2 id=compiling-and-minifying-css class=anchor><a href=#compiling-and-minifying-css>Compiling and Minifying CSS</a></h2><p>If you&rsquo;re using SASS/SCSS in your stylesheets, Hugo can compile them for you with <code>toCSS</code> without having it part of a separate build step. You can also use <code>resources.Concat</code> to concatenate multiple files into a single one, and then optionally use <code>resources.Minify</code> to minify them, which will work on any CSS, JS, JSON, HTML, SVG, or XML file.</p><p>An example combining all of these operations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{ $custom := resources.Get &#34;css/custom.scss&#34; | toCSS }}
</span></span><span class=line><span class=cl>{{ $main := resources.Get &#34;css/main.scss&#34; | toCSS }}
</span></span><span class=line><span class=cl>{{ $styles := slice $main $custom | resources.Concat &#34;/css/styles.css&#34; | resources.Minify }}
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ $styles.Permalink }}&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=processing-images class=anchor><a href=#processing-images>Processing Images</a></h2><p>Before <a href=https://gohugo.io/content-management/page-bundles/>page bundles</a>, images were typically stored under your <code>/static</code> directory. But since its introduction in <a href=https://github.com/gohugoio/hugo/releases/tag/v0.32>v0.32</a>, it opens up the ability to process images during the build. For example, if you want to resize and convert all your images that are displayed on your website, you can use the partial below.</p><blockquote><p>Fun fact: Partials can also be used as functions, not just for rendering snippets of HTML.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>    Usage:
</span></span></span><span class=line><span class=cl><span class=cm>    {{ partial &#34;resize-image.html&#34; (dict &#34;image&#34; $image) }}
</span></span></span><span class=line><span class=cl><span class=cm>    Returns: resized and processed image resource.
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;!</span><span class=o>--</span> <span class=nx>Constants</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>maxSizePx</span> <span class=o>:=</span> <span class=mi>1200</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>imageType</span> <span class=o>:=</span> <span class=s>&#34;jpg&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;!</span><span class=o>--</span> <span class=nx>Input</span> <span class=nx>args</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>image</span> <span class=o>:=</span> <span class=p>.</span><span class=nx>image</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=err>$</span><span class=nx>image_ext</span> <span class=o>:=</span> <span class=p>(</span><span class=nf>lower</span> <span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>Ext</span> <span class=err>$</span><span class=p>.</span><span class=nx>image</span><span class=p>)</span> <span class=p>)</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;!</span><span class=o>--</span> <span class=nx>do</span> <span class=nx>nothing</span> <span class=k>for</span> <span class=nx>these</span> <span class=nx>filetypes</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=nx>eq</span> <span class=err>$</span><span class=nx>image_ext</span> <span class=s>&#34;.gif&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>eq</span> <span class=err>$</span><span class=nx>image_ext</span> <span class=s>&#34;.png&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>else</span> <span class=k>if</span> <span class=err>$</span><span class=nx>image</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;!</span><span class=o>--</span> <span class=nx>Resize</span> <span class=nx>landscape</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=k>if</span> <span class=nx>gt</span> <span class=err>$</span><span class=nx>image</span><span class=p>.</span><span class=nx>Width</span> <span class=err>$</span><span class=nx>maxSizePx</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=err>$</span><span class=nx>resizeStrLandscape</span> <span class=o>:=</span> <span class=nx>printf</span> <span class=s>&#34;%dx %s&#34;</span> <span class=err>$</span><span class=nx>maxSizePx</span> <span class=err>$</span><span class=nx>imageType</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=err>$</span><span class=nx>image</span> <span class=p>=</span> <span class=err>$</span><span class=nx>image</span><span class=p>.</span><span class=nx>Resize</span> <span class=err>$</span><span class=nx>resizeStrLandscape</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;!</span><span class=o>--</span> <span class=nx>Resize</span> <span class=nx>portrait</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>gt</span> <span class=err>$</span><span class=nx>image</span><span class=p>.</span><span class=nx>Height</span> <span class=err>$</span><span class=nx>maxSizePx</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=err>$</span><span class=nx>resizeStrPortrait</span> <span class=o>:=</span> <span class=nx>printf</span> <span class=s>&#34;x%d %s&#34;</span> <span class=err>$</span><span class=nx>maxSizePx</span> <span class=err>$</span><span class=nx>imageType</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=err>$</span><span class=nx>image</span> <span class=p>=</span> <span class=err>$</span><span class=nx>image</span><span class=p>.</span><span class=nx>Resize</span> <span class=err>$</span><span class=nx>resizeStrPortrait</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;!</span><span class=o>--</span> <span class=nx>No</span> <span class=nx>resize</span> <span class=nx>necessary</span><span class=p>,</span> <span class=nx>just</span> <span class=nx>convert</span> <span class=o>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=k>else</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>        <span class=p>{{</span> <span class=err>$</span><span class=nx>image</span> <span class=p>=</span> <span class=err>$</span><span class=nx>image</span><span class=p>.</span><span class=nx>Process</span> <span class=err>$</span><span class=nx>imageType</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>return</span> <span class=err>$</span><span class=nx>image</span> <span class=p>}}</span>
</span></span></code></pre></div><p>Then usage can be something like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{ $image := .Resources.Get &#34;posts/myimage.jpg&#34; }}
</span></span><span class=line><span class=cl>{{ $image = partial &#34;resize-image.html&#34; (dict &#34;image&#34; $image) }}
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ $image.RelPermalink }}&#34;</span><span class=p>/&gt;</span>
</span></span></code></pre></div><h1 id=adaptive-syntax-highlighting class=anchor><a href=#adaptive-syntax-highlighting>Adaptive Syntax Highlighting</a></h1><p>Hugo has built in support for <a href=https://gohugo.io/content-management/syntax-highlighting/>syntax highlighting using Chroma</a>, but the default configuration doesn&rsquo;t allow for dynamically setting light/dark syntax highlighting. Fortunately there&rsquo;s an easy workaround with a few configs!</p><p>By default, your <code>config.toml</code> may look something like this, which tells the renderer to use the <code>monokai</code> style everywhere:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>markup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>highlight</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>style</span><span class=p>:</span><span class=w> </span><span class=l>monokai</span><span class=w>
</span></span></span></code></pre></div><p>Instead, we can set <code>noClasses=false</code> to use an external stylesheet, which will allow us to dynamically set the theme depending if the current colour scheme is light or dark. Change the <code>config.toml</code> to this instead:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>markup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>highlight</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>guessSyntax</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>noClasses</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></div><p>And then generate your desired stylesheets using the <a href=https://gohugo.io/commands/hugo_gen_chromastyles/>Hugo CLI</a> (see <a href=https://gohugo.io/quick-reference/syntax-highlighting-styles/>here</a> for the full list of supported themes):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Light mode</span>
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>monokailight &gt; static/css/syntax.css
</span></span><span class=line><span class=cl><span class=c1># Dark mode</span>
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>monokai &gt; static/css/syntax-dark.css
</span></span></code></pre></div><p>And then include the following in your header to use these stylesheets depending on the colour scheme:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/css/syntax.css&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;screen&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/css/syntax-dark.css&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;screen and (prefers-color-scheme: dark)&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><hr><p>Depending on your other stylesheets, this may be all you need. However, if this still results in some wonky dark mode colours, you can make some manual edits to fix it. The exported chroma stylesheet contains empty classes, which normally would inherit the default text colour from your site, but since we&rsquo;re defining two stylesheets, it may end up inheriting from the light theme instead.</p><p>To resolve this, we&rsquo;ll need to do a <strong>search and replace</strong> of <code>{ }</code> to <code>{ color:inherit }</code> in the second stylesheet, to properly render the text colours based on the colour scheme. So change this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* Generated using: hugo gen chromastyles --style=monokai */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>/* Background */</span> <span class=p>.</span><span class=nc>bg</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* PreWrapper */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* Other */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>.</span><span class=nc>x</span> <span class=p>{</span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>To this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* Generated using: hugo gen chromastyles --style=monokai */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>/* Background */</span> <span class=p>.</span><span class=nc>bg</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* PreWrapper */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class="line hl"><span class=cl><span class=c>/* Other */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>.</span><span class=nc>x</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=kc>inherit</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>Optionally, you can add the following to change the background dynamically in your main stylesheet, along with any other additional styles:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* Light background */</span>
</span></span><span class=line><span class=cl>  <span class=nv>--codebackground</span><span class=p>:</span> <span class=mh>#fafafa</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=o>(</span><span class=nt>prefers-color-scheme</span><span class=o>:</span> <span class=nt>dark</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c>/* Dark background */</span>
</span></span><span class=line><span class=cl>    <span class=nv>--codebackground</span><span class=p>:</span> <span class=mh>#282828</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>pre</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* This sets the codeblock background, e.g. if you don&#39;t like the default colour */</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>codebackground</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* This sets the inline code background */</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>codebackground</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>pre</span> <span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* You may need this so the default text inherits
</span></span></span><span class=line><span class=cl><span class=c>  the correct light/dark text color from your own stylesheet*/</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=kc>inherit</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=building-and-deploying class=anchor><a href=#building-and-deploying>Building and Deploying</a></h1><p>Since my website is hosted on GitHub Pages, I used to manually build and deploy to the <code>gh-pages</code> branch with a script that looks something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># Usage:</span>
</span></span><span class=line><span class=cl><span class=c1># ./deploy.sh</span>
</span></span><span class=line><span class=cl><span class=c1># ./deploy.sh &#34;Your optional commit message&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># If a command fails then the deploy stops</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> -e
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;\033[0;32mRebuilding website...\033[0m\n&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Build the project.</span>
</span></span><span class=line><span class=cl>hugo <span class=c1># if using a theme, replace with `hugo -t &lt;YOURTHEME&gt;`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Go To publish folder</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> docs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add changes to git.</span>
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Commit changes.</span>
</span></span><span class=line><span class=cl><span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;Rebuild site (</span><span class=k>$(</span>date<span class=k>)</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> -n <span class=s2>&#34;</span><span class=nv>$*</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>	<span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>msg</span><span class=si>}</span><span class=s2>: </span><span class=nv>$*</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;</span><span class=nv>$msg</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>printf</span> <span class=s2>&#34;\033[0;32mPushing updates to GitHub...\033[0m\n&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Push source and build repos.</span>
</span></span><span class=line><span class=cl>git push origin main
</span></span></code></pre></div><p>However, after learning about CI/CD and that it&rsquo;s quite easy to set up these days, that manual deployment has now been replaced with a Github Action that runs on commits to main.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Github Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Fetch Hugo themes (true OR recursive)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>    </span><span class=c># Fetch all history for .GitInfo and .Lastmod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.147.1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>github.ref == &#39;refs/heads/main&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./docs</span><span class=w>
</span></span></span></code></pre></div><h1 id=bonus-using-obsidian-as-a-local-cms class=anchor><a href=#bonus-using-obsidian-as-a-local-cms>Bonus: Using Obsidian as a Local CMS</a></h1><p>Since Hugo posts are just markdown files, I started using <a href=https://obsidian.md/>Obsidian</a> to edit the files. Previously, I was writing content in my IDE, but something about it felt a bit off &ndash; the virtual atmosphere that promotes writing code just doesn&rsquo;t hit the same for writing creatively.</p><p>I wanted a simple <a href=https://en.wikipedia.org/wiki/WYSIWYG>WYSIWYG</a> editor to write my posts in, and with Obsidian being more popular than ever these days, I incorporated it into my workflow and have been finding it quite a joy to use! Now, I can write content in a clean interface using markdown, and have the niceties of having the elements rendered similar to how it&rsquo;d look on my website without needing to have a separate window open to show the preview.</p><h2 id=settings class=anchor><a href=#settings>Settings</a></h2><p>Be sure to disable <strong>&ldquo;Use Wikilinks&rdquo;</strong> so that markdown format is used for image links, and select <strong>&ldquo;Default location for new attachments&rdquo;</strong> is set to the <strong>&ldquo;Same folder as current file&rdquo;</strong>, which works well if page bundles are used.</p><p><div class="row img-captioned"><a href=/posts/2025/05/hugo-tips-and-tricks/settings.png><img loading=lazy class="img-responsive img-content" src=/posts/2025/05/hugo-tips-and-tricks/settings.png></a><p class=caption>Obsidian settings -> Files and links</p></div></p><p>Note that the filename of the pasted image may not render correctly by Hugo, since it typically doesn&rsquo;t play well with spaces in image filenames. To fix this, just rename the image in Obsidian, which will automatically update the link in your Markdown post.</p><h2 id=plugins class=anchor><a href=#plugins>Plugins</a></h2><p>Some days I want to stay within Obsidian and not have to open a separate terminal to commit my changes to Github, and the <a href=https://github.com/Vinzent03/obsidian-git>Obsidian Git Plugin</a> makes that possible. After setting it up, you can do normal git operations straight from Obsidian for a truly seamless workflow.</p><p>There&rsquo;s a plethora of other <a href=https://obsidian.md/plugins>community of plugins</a> which you can incorporate into your own writing workflow.</p><h2 id=front-matter class=anchor><a href=#front-matter>Front Matter</a></h2><p>Hugo supports defining your posts&rsquo; front matter in <code>yaml</code> or <code>toml</code>, but Obsidian only supports rendering <code>yaml</code>. If you have a front matter that looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>title: New Post
</span></span><span class=line><span class=cl>date: 2025-05-23T14:34:05-07:00
</span></span><span class=line><span class=cl>tagline:
</span></span><span class=line><span class=cl>image: placeholder.jpeg
</span></span><span class=line><span class=cl>tags:
</span></span><span class=line><span class=cl>draft: true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>layout: single
</span></span><span class=line><span class=cl>type: blog
</span></span><span class=line><span class=cl>aliases:
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Lorem ipsum dolor sit amet...
</span></span></code></pre></div><p>It&rsquo;ll be rendered in Obsidian like so, which is pretty nifty!</p><p><div class="row img-captioned"><a href=/posts/2025/05/hugo-tips-and-tricks/post.png><img loading=lazy class="img-responsive img-content" src=/posts/2025/05/hugo-tips-and-tricks/post.png></a><p class=caption>A nicely rendered markdown document, a welcome upgrade to writing in an IDE.</p></div></p></div><div class=nav-btn><a href=/>&lt; Recent Posts</a></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="justinmklam",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><div style=text-align:center><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>Comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>Comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script defer id=dsq-count-scr src=//justinmklam.disqus.com/count.js async></script></body><footer><div class=footer-container><hr><p>&copy; 2025 Justin Lam | <a href=/colophon>Colophon</a></p></div></footer></html>