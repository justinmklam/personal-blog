<!doctype html><html lang=en><head><title>Adaptive Syntax Highlighting for Light & Dark Modes in Hugo</title>
<meta property="og:image" content="https://justinmklam.com/"><meta property="og:type" content="blog"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Justin Lam"><link rel=stylesheet href=/css/neat.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/syntax.css media=screen><link rel=stylesheet href=/css/syntax-dark.css media="screen and (prefers-color-scheme: dark)"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-85178257-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-85178257-1")</script></head><body><div class=navbar><span class=navbar-brand>Justin Lam
</span>/ <a href=/>Blog</a>
/ <a href=/archives/>Archives</a>
/ <a href=/about/>About</a>
/ <a href=/contact/>Contact</a></div><div><div class=single-content><h2 data-toc-skip class=blog-title>Adaptive Syntax Highlighting for Light & Dark Modes in Hugo</h2><p class=blog-title-metadata>Posted on May 19, 2025
<em>&nbsp;&#183;&nbsp;3 min read
&nbsp;&#183;&nbsp;
<span class=disqus-comment-count data-disqus-url=https://justinmklam.com/posts/2025/05/hugo-syntax-highlighting/#disqus_thread># comments</span>
&nbsp;&#183;&nbsp;
<a class=blog-tag href=/tags/today-i-learned>#today-i-learned&nbsp;</a>
<a class=blog-tag href=/tags/programming>#programming&nbsp;</a></em></p><div class="blog-content page-content"><p>Hugo has built in support for <a href=https://gohugo.io/content-management/syntax-highlighting/>syntax highlighting using Chroma</a>, but the default configuration doesn&rsquo;t allow for dynamically setting light/dark syntax highlighting. Fortunately there&rsquo;s an easy workaround with a few configs!</p><p>By default, your <code>config.toml</code> may look something like this, which tells the renderer to use the <code>monokai</code> style everywhere:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>markup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>markup</span><span class=p>.</span><span class=nx>highlight</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>style</span> <span class=p>=</span> <span class=nx>monokai</span>
</span></span></code></pre></div><p>Instead, we can set <code>noClasses=false</code> to use an external stylesheet, which will allow us to dynamically set the theme depending if the current colour scheme is light or dark. Change the <code>config.toml</code> to this instead:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>markup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>markup</span><span class=p>.</span><span class=nx>highlight</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>guessSyntax</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>noClasses</span> <span class=p>=</span> <span class=kc>false</span>
</span></span></code></pre></div><p>And then generate your desired stylesheets using the <a href=https://gohugo.io/commands/hugo_gen_chromastyles/>Hugo CLI</a> (see <a href=https://gohugo.io/quick-reference/syntax-highlighting-styles/>here</a> for the full list of supported themes):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Light mode</span>
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>monokailight &gt; static/css/syntax.css
</span></span><span class=line><span class=cl><span class=c1># Dark mode</span>
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>monokai &gt; static/css/syntax-dark.css
</span></span></code></pre></div><p>And then include the following in your header to use these stylesheets depending on the colour scheme:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/css/syntax.css&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;screen&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/css/syntax-dark.css&#34;</span> <span class=na>media</span><span class=o>=</span><span class=s>&#34;screen and (prefers-color-scheme: dark)&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><hr><p>Depending on your other stylesheets, this may be all you need. However, if this still results in some wonky dark mode colours, you can make some manual edits to fix it. The exported chroma stylesheet contains empty classes, which normally would inherit the default text colour from your site, but since we&rsquo;re defining two stylesheets, it may end up inheriting from the light theme instead.</p><p>To resolve this, we&rsquo;ll need to do a <strong>search and replace</strong> of <code>{ }</code> to <code>{ color:inherit }</code> in the second stylesheet, to properly render the text colours based on the colour scheme. So change this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* Generated using: hugo gen chromastyles --style=monokai */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>/* Background */</span> <span class=p>.</span><span class=nc>bg</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* PreWrapper */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* Other */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>.</span><span class=nc>x</span> <span class=p>{</span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>To this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* Generated using: hugo gen chromastyles --style=monokai */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>/* Background */</span> <span class=p>.</span><span class=nc>bg</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* PreWrapper */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=mh>#f8f8f2</span><span class=p>;</span><span class=k>background-color</span><span class=p>:</span><span class=mh>#272822</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class="line hl"><span class=cl><span class=c>/* Other */</span> <span class=p>.</span><span class=nc>chroma</span> <span class=p>.</span><span class=nc>x</span> <span class=p>{</span> <span class=k>color</span><span class=p>:</span><span class=kc>inherit</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></div><p>Optionally, you can add the following to change the background dynamically in your main stylesheet, along with any other additional styles:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* Light background */</span>
</span></span><span class=line><span class=cl>  <span class=nv>--codebackground</span><span class=p>:</span> <span class=mh>#fafafa</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=o>(</span><span class=nt>prefers-color-scheme</span><span class=o>:</span> <span class=nt>dark</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c>/* Dark background */</span>
</span></span><span class=line><span class=cl>    <span class=nv>--codebackground</span><span class=p>:</span> <span class=mh>#282828</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>pre</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* This sets the codeblock background, e.g. if you don&#39;t like the default colour */</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>codebackground</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* This sets the inline code background */</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>codebackground</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>pre</span> <span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/* You may need this so the default text inherits
</span></span></span><span class=line><span class=cl><span class=c>  the correct light/dark text color from your own stylesheet*/</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=kc>inherit</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Now your site will have consistently themed syntax highlighting!</p></div><div class=nav-btn><a href=/>&lt; Recent Posts</a></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="justinmklam",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><div style=text-align:center><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>Comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>Comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script defer type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script defer id=dsq-count-scr src=//justinmklam.disqus.com/count.js async></script></body><footer><div class=footer-container><hr><p>&copy; 2025 Justin Lam | <a href=/colophon>Colophon</a></p></div></footer></html>